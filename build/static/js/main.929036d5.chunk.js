(this.webpackJsonpmy_first_react=this.webpackJsonpmy_first_react||[]).push([[0],{60:function(e,t,a){e.exports=a(77)},65:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(0),i=a.n(c),r=a(14),l=a.n(r),o=a(19),s=a(7);a(65);var u=function(e){var t=e.loggedIn,a=e.setLoggedIn,n=e.getToken,c=e.clearToken,r=e.username,l=e.active,s=e.setActive;return i.a.createElement("div",{className:"nav"},i.a.createElement("h1",null,"Fitness Tracker"),n()?i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Hello, ",r,"!"),i.a.createElement("button",{onClick:function(e){e.preventDefault(),a(!1),c()}},"Log Out")):null,i.a.createElement("nav",{className:"nav-items"},t?null:i.a.createElement(o.b,{to:"/",className:"nav-link"},i.a.createElement("span",{onClick:function(){return s("login")}},"login"===l?i.a.createElement("strong",null,"Login/Register"):"Login/Register")),i.a.createElement(o.b,{to:"/routines",className:"nav-link"},i.a.createElement("span",{onClick:function(){return s("routines")}},"routines"===l?i.a.createElement("strong",null,"Routines"):"Routines")),i.a.createElement(o.b,{to:"/activities",className:"nav-link"},i.a.createElement("span",{onClick:function(){return s("activities")}},"activities"===l?i.a.createElement("strong",null,"Activities"):"Activities")),t?i.a.createElement(o.b,{to:"/myroutines",className:"nav-link"},i.a.createElement("span",{onClick:function(){return s("myroutines")}},"myroutines"===l?i.a.createElement("strong",null,"My Routines"):"My Routines")):null))},m=a(31),d=a(96),v=a(17),E=a.n(v),f=a(28),p="https://fitnesstrac-kr.herokuapp.com/api/",b=function(){if(localStorage.getItem("authfitness-token"))return localStorage.getItem("authfitness-token");localStorage.removeItem("authfitness-token")},h=function(e,t){localStorage.setItem("authfitness-token",e),localStorage.setItem("username",t)};function g(){var e={"Content-Type":"application/json"};return b()&&(e.Authorization="Bearer ".concat(b())),e}var y=function(){var e=Object(f.a)(E.a.mark((function e(t,a,n){var c,i,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:t,headers:g()},n&&(c.body=JSON.stringify(n)),e.next=4,fetch("".concat(p).concat(a),c);case 4:return i=e.sent,e.next=7,i.json();case 7:return(r=e.sent)&&r.token&&h(r.token),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),N=function(e){var t=e.activitiesList,a=e.setActivitiesList,r=Object(c.useState)(!1),l=Object(n.a)(r,2),o=l[0],s=l[1],u=Object(c.useState)(""),v=Object(n.a)(u,2),E=v[0],f=v[1],p=Object(c.useState)(""),h=Object(n.a)(p,2),g=h[0],N=h[1],O=Object(c.useState)(!1),j=Object(n.a)(O,2),k=j[0],S=j[1];function A(){f(""),N("")}return document.querySelector("body").style.overflow=o?"hidden":"visible",i.a.createElement("div",{className:"page"},i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"Activities"),b()?i.a.createElement("button",{className:"modal-button",onClick:function(){s(!0)}},"New Activity"):null),i.a.createElement("div",{className:"list"},t.map((function(e){return i.a.createElement(d.a,{className:"card",key:e.id},i.a.createElement("div",{className:"card-header"},i.a.createElement("h2",{className:"activity-name"},e.name)),i.a.createElement("div",{className:"card-body"},i.a.createElement("p",{className:"activity-desc"},e.description)))}))),o?i.a.createElement("div",{className:"modal"},i.a.createElement("div",{className:"contents"},i.a.createElement("label",null,"Add A New Activity"),i.a.createElement("form",{className:"new-form",onSubmit:function(e){e.preventDefault();var n={name:E,description:g};!function(){for(var e,a=0;a<t.length;a++)if(e=t[a].name,E===e)return!0;return!1}()?y("POST","/activities",n).then((function(e){a([e].concat(Object(m.a)(t))),A(),s(!1)})):S(!0)}},i.a.createElement("div",null,i.a.createElement("input",{type:"text",placeholder:"name of activity",value:E,onChange:function(e){S(!1),f(e.target.value)},required:!0}),i.a.createElement("h5",null,"required field")),i.a.createElement("div",null,i.a.createElement("textarea",{placeholder:"description",rows:"4",value:g,onChange:function(e){return N(e.target.value)},required:!0}),i.a.createElement("h5",null,"required field")),k?i.a.createElement("h5",{className:"duplicate"},'"',E,'" already exists'):i.a.createElement("h5",null,"\xa0"),i.a.createElement("div",{className:"buttons"},i.a.createElement("button",{className:"cancel-button",onClick:function(){S(!1),A(),s(!1)}},"Cancel"),i.a.createElement("button",{className:"add-button",disabled:""===E||""===g},"Add Activity!"))))):null)},O=(a(72),function(e){var t=e.routinesList;e.setRoutinesList;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"routines-page"},i.a.createElement("h1",null,"View Public Routines..."),i.a.createElement("br",null),t.map((function(e){return i.a.createElement(d.a,{className:"routine-card",key:e.id},i.a.createElement("h2",{className:"routine-header"},e.creatorName,"'s ",e.name),i.a.createElement("p",{className:"routine-goal"},"Routine Goal: ",e.goal),e.activities?e.activities.map((function(e){return i.a.createElement("div",{key:e.id},i.a.createElement("p",{className:"activity-name"},"Activity: ",e.name),i.a.createElement("p",{className:"activity-description"},"Description: ",e.description),i.a.createElement("p",{className:"activity-duration"},"Duration: ",e.duration),i.a.createElement("p",{className:"activity-count"},"Count: ",e.count))})):null)}))))}),j=a(100),k=a(99),S=a(101),A=a(98),C=a(51),w=a.n(C),I=a(52),L=a.n(I),D=a(53),T=a.n(D),R=function(e){var t=e.ID,a=e.setID,r=e.routinesList,l=e.setRoutinesList,o=e.showModal,s=e.setShowModal,u=e.showDelete,d=e.setShowDelete,v=e.name,p=e.goal,b=e.setName,h=e.setGoal,g=e.myRoutines,N=Object(c.useState)(!1),O=Object(n.a)(N,2),j=O[0],k=O[1];function S(){var e,a;e=t?(a=r.filter((function(e){return e.id!==t}))).length:(a=r.slice()).length;for(var n=0;n<e;n++)if(v===a[n].name)return!0;return!1}function A(){b(""),h(""),a(null)}return document.querySelector("body").style.overflow=o?"hidden":"visible",i.a.createElement(i.a.Fragment,null,o?i.a.createElement("div",{className:"modal"},i.a.createElement("div",{className:"contents"},t?i.a.createElement("label",null,"Edit Routine"):i.a.createElement("label",null,"Add A New Routine"),i.a.createElement("form",{className:"new-form",onSubmit:function(){var e=Object(f.a)(E.a.mark((function e(a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),n={name:v,goal:p,isPublic:!0},S()?k(!0):(t?y("PATCH","/routines/".concat(t),n).then((function(e){l([].concat(Object(m.a)(r),[e]))})).catch(console.error):y("POST","/routines",n).then((function(e){l([].concat(Object(m.a)(r),[e]))})).catch(console.error),A(),s(!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},i.a.createElement("div",null,i.a.createElement("input",{type:"text",placeholder:"name of routine",value:v,onChange:function(e){k(!1),b(e.target.value)},required:!0}),i.a.createElement("h5",null,"required field")),i.a.createElement("div",null,i.a.createElement("textarea",{placeholder:"goal",rows:"4",value:p,onChange:function(e){return h(e.target.value)},required:!0}),i.a.createElement("h5",null,"required field")),j?i.a.createElement("h5",{className:"duplicate"},'"',v,'" already exists as a routine.'):i.a.createElement("h5",null,"\xa0"),i.a.createElement("div",{className:"buttons"},i.a.createElement("button",{className:"cancel-button",onClick:function(){k(!1),A(),s(!1)}},"Cancel"),i.a.createElement("button",{className:"add-button",disabled:""===v||""===p},t?"Edit":"Add"," Routine!"))))):null,u?i.a.createElement("div",{className:"modal delete-modal"},i.a.createElement("div",{className:"confirm-delete"},i.a.createElement("p",null,"Delete this routine?"),i.a.createElement("button",{className:"yes",onClick:function(){for(var e=function(e){if(g[e].id===t)return y("DELETE","/routines/".concat(t)).then((function(){l([r.splice(e,1)])})).catch(console.error),"break"},n=0;n<g.length;n++){if("break"===e(n))break}d(!1),a(null)}},"Yes"),i.a.createElement("button",{className:"no",onClick:function(){d(!1)}},"No"))):null)};a(73);var x=function(e){var t=e.activitiesList,a=e.routineid,n=e.setShowAdd,c=e.updateActivities,r=e.setUpdateActivities,l=e.count,o=e.setCount,s=e.duration,u=e.setDuration,m=e.addActivityid,d=e.setAddActivityid,v=e.activityEdit,E=e.setActivityEdit;return i.a.createElement("form",null,v?null:i.a.createElement("select",{onChange:function(e){d(e.target.value)}},t.map((function(e,t){return i.a.createElement("option",{value:e.id,valuename:e.name,key:t},e.name)}))),i.a.createElement("div",{className:"count-duration"},i.a.createElement("input",{type:"text",placeholder:"Count",value:l,onChange:function(e){o(e.target.value)}}),i.a.createElement("input",{type:"text",placeholder:"Duration",value:s,onChange:function(e){u(e.target.value)}})),i.a.createElement("button",{onClick:function(e){e.preventDefault(),v?y("PATCH","/routine_activities/".concat(m),{count:l,duraction:s}).then((function(){n(!1),E(!1),r(!c),d(""),o(""),u("")})):y("POST","/routines/".concat(a,"/activities"),{activityId:m,count:l,duration:s}).then((function(){n(!1),r(!c)}))}},v?"EDIT":"ADD"))},P=function(e){var t=e.setActive,a=e.routinesList,r=e.setRoutinesList,l=e.username,o=e.activitiesList,s=e.updateActivities,u=e.setUpdateActivities,m=Object(c.useState)(!1),v=Object(n.a)(m,2),E=v[0],f=v[1],p=Object(c.useState)([]),h=Object(n.a)(p,2),g=h[0],N=h[1],O=Object(c.useState)(""),C=Object(n.a)(O,2),I=C[0],D=C[1],P=Object(c.useState)(""),q=Object(n.a)(P,2),G=q[0],M=q[1],U=Object(c.useState)(!1),_=Object(n.a)(U,2),F=_[0],J=_[1],H=Object(c.useState)(!1),B=Object(n.a)(H,2),z=B[0],V=B[1],Y=Object(c.useState)(!1),K=Object(n.a)(Y,2),Q=K[0],W=K[1],X=Object(c.useState)(null),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)(""),ae=Object(n.a)(te,2),ne=ae[0],ce=ae[1],ie=Object(c.useState)(""),re=Object(n.a)(ie,2),le=re[0],oe=re[1],se=Object(c.useState)("315"),ue=Object(n.a)(se,2),me=ue[0],de=ue[1],ve=Object(c.useState)(!1),Ee=Object(n.a)(ve,2),fe=Ee[0],pe=Ee[1];return t("myroutines"),Object(c.useEffect)((function(){y("GET","/users/".concat(l,"/routines")).then((function(e){N(e.sort((function(e,t){return e.name>t.name?1:-1})))})).catch(console.error)}),[a,l]),i.a.createElement("div",{className:"page"},i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"My Routines"),b()?i.a.createElement("button",{className:"modal-button",onClick:function(){f(!0)}},"New Routine"):null),i.a.createElement("div",{className:"list"},g.map((function(e){return i.a.createElement(d.a,{className:"card myroutines",key:e.id},i.a.createElement("div",{className:"card-header"},i.a.createElement("h2",{className:"myroutine-name"},e.name," ",$===e.id&&F?"Activities":e.id)),i.a.createElement("div",{className:"card-body"},$===e.id&&F&&Q?i.a.createElement(x,{activitiesList:o,routineid:e.id,setShowAdd:W,setUpdateActivities:u,updateActivities:s,count:ne,setCount:ce,duration:le,setDuration:oe,addActivityid:me,setAddActivityid:de,activityEdit:fe,setActivityEdit:pe}):null,$===e.id&&F?e.activities<1?i.a.createElement("p",null,'No activities, press "Add" to add activities to your routine.'):e.activities.map((function(e){return i.a.createElement(j.a,{className:"myroutine-activity",key:e.id},i.a.createElement(S.a,{expandIcon:i.a.createElement(w.a,null)},i.a.createElement(A.a,{className:"myactivity-name"},e.name),i.a.createElement(A.a,{className:"myactivity-count"},"Reps: ",e.count),i.a.createElement(A.a,{className:"myactivity-duration"},"Duration: ",e.duration," minutes")),i.a.createElement(k.a,null,i.a.createElement(A.a,{className:"myactivity-goal"},e.description),i.a.createElement(L.a,{onClick:function(){y("DELETE","/routine_activities/".concat(e.routineActivityId)).then((function(e){u(!s)})).catch(console.error)}}),i.a.createElement(T.a,{onClick:function(){W(!0),pe(!0),de(e.routineActivityId),ce(e.count),oe(e.duration)}})))})):i.a.createElement("p",{className:"myroutine-goal"},"Goal: ",e.goal)),i.a.createElement("div",{className:"card-footer"},i.a.createElement("button",{className:"flip",onClick:function(){J(!F),ee(e.id)}},$===e.id&&F?"Goal":"Activities"),i.a.createElement("button",{className:"edit",onClick:$===e.id&&F?function(){ee(e.id),W(!Q)}:function(){ee(e.id),D(e.name),M(e.goal),f(!0)}},$===e.id&&F?"Add":"Edit"),i.a.createElement("button",{className:"delete",onClick:function(){ee(e.id),V(!0)}},"Delete")))}))),i.a.createElement(R,{ID:$,setID:ee,routinesList:a,setRoutinesList:r,myRoutines:g,showModal:E,setShowModal:f,showDelete:z,setShowDelete:V,name:I,goal:G,setName:D,setGoal:M}))};a(75);var q=function(e){var t=e.loggedIn,a=e.setLoggedIn,r=e.setToken,l=e.setUsername,o=e.setShowModal,s=e.setActive,u=Object(c.useState)(""),m=Object(n.a)(u,2),d=m[0],v=m[1],E=Object(c.useState)(""),f=Object(n.a)(E,2),p=f[0],b=f[1],h=Object(c.useState)(""),g=Object(n.a)(h,2),y=g[0],N=g[1];return s("login"),i.a.createElement("div",{className:"login-form"},t?null:i.a.createElement("form",{className:"login-form"},i.a.createElement("h2",{className:"title"},"Login or Register"),y?i.a.createElement("h3",{className:"error"},y):null,i.a.createElement("div",{className:"login-inputs"},i.a.createElement("input",{className:"loginName",type:"text",placeholder:"loginName",value:d,onChange:function(e){return v(e.target.value)}}),i.a.createElement("input",{className:"loginPassword",id:"passwordInput",type:"password",placeholder:"loginPassword",value:p,onChange:function(e){return b(e.target.value)}})),i.a.createElement("div",{className:"buttons"},i.a.createElement("button",{onClick:function(e){e.preventDefault(),fetch("https://fitnesstrac-kr.herokuapp.com/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:p})}).then((function(e){return e.json()})).then((function(e){e.error&&N(e.error),r(e.token,e.user.username),a(!0),l(e.user.username),v(""),b(""),N("")})).catch((function(e){return console.log(e)}))}},"Login"),i.a.createElement("button",{onClick:function(e){e.preventDefault(),fetch("https://fitnesstrac-kr.herokuapp.com/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:p})}).then((function(e){return e.json()})).then((function(e){e.error&&N(e.error),r(e.token,e.user.username),a(!0),l(e.user.username),o(!1),v(""),b(""),N("")})).catch((function(e){return console.log(e)}))}},"Register"))))};a(76);function G(){var e=Object(c.useState)([]),t=Object(n.a)(e,2),a=t[0],r=t[1],l=Object(c.useState)([]),m=Object(n.a)(l,2),d=m[0],v=m[1],E=Object(c.useState)(!1),f=Object(n.a)(E,2),p=f[0],b=f[1],h=Object(c.useState)(""),g=Object(n.a)(h,2),j=g[0],k=g[1],S=Object(c.useState)("login"),A=Object(n.a)(S,2),C=A[0],w=A[1],I=Object(c.useState)(!1),L=Object(n.a)(I,2),D=L[0],T=L[1];Object(c.useEffect)((function(){y("GET","/routines").then((function(e){r(e)})).catch((function(e){console.error("There was a problem getting your routines",e)}))}),[D]),Object(c.useEffect)((function(){y("GET","/activities").then((function(e){v(e.sort((function(e,t){return e.id<t.id?1:-1})))})).catch(console.error)}),[]);var R=function(){if(localStorage.getItem("authfitness-token"))return b(!0),k(localStorage.getItem("username")),localStorage.getItem("authfitness-token");localStorage.removeItem("authfitness-token")},x=function(){localStorage.removeItem("authfitness-token"),localStorage.removeItem("username")};return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,null,i.a.createElement("div",{className:"app"},i.a.createElement(u,{loggedIn:p,setLoggedIn:b,getToken:R,clearToken:x,username:j,active:C,setActive:w}),i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"/activities"},i.a.createElement(N,{getToken:R,routinesList:a,setRoutinesList:r,activitiesList:d})),i.a.createElement(s.b,{path:"/routines"},i.a.createElement(O,{routinesList:a,setRoutinesList:r})),i.a.createElement(s.b,{path:"/myroutines"},!1===p?i.a.createElement(s.a,{to:"/"}):i.a.createElement(P,{getToken:R,setActive:w,routinesList:a,setRoutinesList:r,username:j,activitiesList:d,updateActivities:D,setUpdateActivities:T})),i.a.createElement(s.b,{path:"/"},p?i.a.createElement(s.a,{to:"/myroutines"}):i.a.createElement(q,{loggedIn:p,setLoggedIn:b,clearToken:x,setToken:function(e,t){localStorage.setItem("authfitness-token",e),localStorage.setItem("username",t)},setUsername:k,setActive:w}))))))}l.a.render(i.a.createElement(G,null),document.getElementById("app"))}},[[60,1,2]]]);
//# sourceMappingURL=main.929036d5.chunk.js.map